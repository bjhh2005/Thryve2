# Thryve - æ™ºèƒ½æ–‡ä»¶å¤„ç†å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨

[English](README.md) | ç®€ä½“ä¸­æ–‡

[![Version](https://img.shields.io/badge/version-0.5-blue.svg)](https://github.com/your-username/Thryve2)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)]()
[![Contributors](https://img.shields.io/badge/contributors-5-orange.svg)]()
[![Made with React](https://img.shields.io/badge/React-18-%2361DAFB.svg?logo=react)](https://reactjs.org/)

Thryve æ˜¯ä¸€ä¸ªä¸“æ³¨äºæ™ºèƒ½æ–‡ä»¶å¤„ç†çš„å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨ã€‚é€šè¿‡ç›´è§‚çš„èŠ‚ç‚¹å¼ç¼–ç¨‹ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾åˆ›å»ºå¤æ‚çš„æ–‡ä»¶å¤„ç†å·¥ä½œæµï¼Œå¦‚æ‰¹é‡æ–‡ä»¶æ“ä½œã€æ ¼å¼è½¬æ¢ã€å†…å®¹åˆ†æå’Œè‡ªåŠ¨åŒ–æ–‡æ¡£å¤„ç†ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›å¼ºå¤§çš„å·¥ä½œæµæ‰§è¡Œå¼•æ“å’Œå®æ—¶å¤„ç†åé¦ˆã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ“‚ **æ™ºèƒ½æ–‡ä»¶å¤„ç†**:
  - æ‰¹é‡æ–‡ä»¶æ“ä½œä¸è½¬æ¢
  - å¤šç§æ–‡ä»¶æ ¼å¼æ”¯æŒ
  - å†…å®¹æå–ä¸åˆ†æ
  - è‡ªåŠ¨åŒ–æ–‡æ¡£å¤„ç†

- ğŸ¨ ç›´è§‚çš„å¯è§†åŒ–å·¥ä½œæµè®¾è®¡ç•Œé¢
- ğŸ”Œ ä¸°å¯Œçš„èŠ‚ç‚¹ç±»å‹æ”¯æŒï¼ˆå¼€å§‹ã€ç»“æŸã€æ¡ä»¶ã€å¾ªç¯ã€æ–‡ä»¶å¤„ç†ç­‰ï¼‰
- ğŸ“ å®æ—¶å·¥ä½œæµæ‰§è¡Œå’ŒçŠ¶æ€åé¦ˆ
- ğŸ”„ æ”¯æŒå¤æ‚çš„æ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯é€»è¾‘
- ğŸ’¾ å·¥ä½œæµçš„ä¿å­˜ã€å¯¼å…¥å’Œå¯¼å‡º
- ğŸ–¥ï¸ è·¨å¹³å°æ¡Œé¢åº”ç”¨æ”¯æŒ (Windows, macOS, Linux)
- ğŸŒ åŸºäº Socket.IO çš„å®æ—¶é€šä¿¡
- ğŸ” å†…ç½®è°ƒè¯•å’Œæµ‹è¯•è¿è¡ŒåŠŸèƒ½

## æŠ€æœ¯äº®ç‚¹

### äº‹ä»¶æ€»çº¿æ¶æ„ (Event Bus Architecture)

åç«¯é‡‡ç”¨äº‹ä»¶æ€»çº¿æ¶æ„è®¾è®¡ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- ğŸ”„ **æ¾è€¦åˆè®¾è®¡**: é€šè¿‡äº‹ä»¶æ€»çº¿å®ç°èŠ‚ç‚¹é—´çš„è§£è€¦ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶
- ğŸ“¢ **äº‹ä»¶é©±åŠ¨**: é‡‡ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œæ”¯æŒèŠ‚ç‚¹é—´çš„å¼‚æ­¥é€šä¿¡
- ğŸ­ **å·¥å‚æ¨¡å¼**: ä½¿ç”¨èŠ‚ç‚¹å·¥å‚ç»Ÿä¸€ç®¡ç†èŠ‚ç‚¹çš„åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸ
- ğŸ”Œ **å¯æ‰©å±•æ€§**: è½»æ¾æ·»åŠ æ–°èŠ‚ç‚¹ç±»å‹ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶**: æ”¯æŒæ¡ä»¶èŠ‚ç‚¹å¤šè¾“å‡ºç«¯å£ã€å¾ªç¯èŠ‚ç‚¹æµç¨‹æ§åˆ¶ç­‰å¤æ‚åœºæ™¯
- ğŸ” **çŠ¶æ€è¿½è¸ª**: é€šè¿‡äº‹ä»¶æ€»çº¿å®ç°å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€çš„å®æ—¶ç›‘æ§

```python
# äº‹ä»¶æ€»çº¿ç¤ºä¾‹
class WorkflowEngine:
    def __init__(self):
        self.bus = EventBus()
        self.bus.on("askMessage", self.askMessage)
        self.bus.on("putStack", self.putStack)
        # ... æ›´å¤šäº‹ä»¶ç›‘å¬
```

### æ™ºèƒ½å˜é‡åŒæ­¥ç³»ç»Ÿ (Smart Variable Sync System)

å‰ç«¯å®ç°äº†ä¸€å¥—æ™ºèƒ½çš„å˜é‡åŒæ­¥ç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸ”„ **å®æ—¶åŒæ­¥**: é€šè¿‡æ’ä»¶æœºåˆ¶å®ç°èŠ‚ç‚¹è¾“å‡ºçš„å®æ—¶å˜é‡åŒæ­¥
- ğŸ” **ç±»å‹å®‰å…¨**: åŸºäº JSON Schema çš„ç±»å‹ç³»ç»Ÿï¼Œç¡®ä¿å˜é‡ç±»å‹çš„æ­£ç¡®æ€§
- ğŸ¯ **æ™ºèƒ½å‘½å**: è‡ªåŠ¨æ ¹æ®èŠ‚ç‚¹æ ‡é¢˜ç”Ÿæˆæ˜“è¯»çš„å˜é‡åç§°
- ğŸ–¼ï¸ **å¯è§†åŒ–å¢å¼º**: ä¸ºå˜é‡æ·»åŠ å›¾æ ‡å’Œå…ƒæ•°æ®ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- ğŸ›¡ï¸ **æ•°æ®éªŒè¯**: å†…ç½®æ•°æ®åˆæ³•æ€§æ£€æŸ¥ï¼Œé˜²æ­¢æ— æ•ˆæ•°æ®ä¼ é€’
- ğŸ“¦ **ç‰¹æ®Šç±»å‹å¤„ç†**: é’ˆå¯¹æ–‡ä»¶è¾“å…¥ç­‰ç‰¹æ®ŠèŠ‚ç‚¹ç±»å‹çš„å®šåˆ¶åŒ–å¤„ç†

```typescript
// å˜é‡åŒæ­¥ç¤ºä¾‹
export const createSyncVariablePlugin = definePluginCreator({
  onInit(ctx) {
    ctx.document.onNodeCreate(({ node }) => {
      // ç›‘å¬èŠ‚ç‚¹åˆ›å»ºå’Œæ›´æ–°äº‹ä»¶
      const variableData = node.getData(FlowNodeVariableData);
      
      // è‡ªåŠ¨åŒæ­¥èŠ‚ç‚¹è¾“å‡ºåˆ°å˜é‡ç³»ç»Ÿ
      variableData.setVar(
        ASTFactory.createVariableDeclaration({
          meta: { title, icon },
          key: nodeId,
          type: typeAST
        })
      );
    });
  }
});
```

è¿™ç§è®¾è®¡ä¸ä»…ç®€åŒ–äº†ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œè¿˜é€šè¿‡ç±»å‹ç³»ç»Ÿå’Œæ•°æ®éªŒè¯ç¡®ä¿äº†å·¥ä½œæµçš„å¯é æ€§ã€‚å˜é‡åŒæ­¥ç³»ç»Ÿä½œä¸ºå‰åç«¯ä¹‹é—´çš„æ¡¥æ¢ï¼Œå¤§å¤§æå‡äº†æ•°æ®æµçš„å¯ç»´æŠ¤æ€§å’Œç¨³å®šæ€§ã€‚

### å®æ—¶æ—¥å¿—åé¦ˆç³»ç»Ÿ (Real-time Logging System)

åŸºäº Socket.IO å®ç°çš„å®æ—¶æ—¥å¿—åé¦ˆç³»ç»Ÿï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸ”„ **å®æ—¶åé¦ˆ**: é€šè¿‡ WebSocket å®ç°å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€çš„å®æ—¶æ¨é€
- ğŸ¨ **åˆ†çº§å±•ç¤º**: æ”¯æŒå¤šç§æ—¥å¿—çº§åˆ«ï¼ˆINFOã€WARNã€ERRORã€SUCCESSã€SYSTEMã€OUTPUTï¼‰
- ğŸ¯ **èŠ‚ç‚¹å®šä½**: æ¯æ¡æ—¥å¿—éƒ½å¯ä»¥è¿½è¸ªåˆ°å…·ä½“çš„èŠ‚ç‚¹
- ğŸ’« **åŠ¨æ€æ›´æ–°**: è‡ªåŠ¨æ»šåŠ¨å’Œå®æ—¶æ›´æ–°çš„æ—¥å¿—ç•Œé¢
- ğŸ­ **æ ·å¼ç¾åŒ–**: æ¯ç§æ—¥å¿—ç±»å‹éƒ½æœ‰ç‹¬ç‰¹çš„è§†è§‰æ ·å¼
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œæ•´çš„é”™è¯¯æ•è·å’Œå±•ç¤ºæœºåˆ¶

```typescript
// å‰ç«¯æ—¥å¿—å¤„ç†ç¤ºä¾‹
socket.on('info', (data) => addLog({ 
    level: 'INFO', 
    message: data.message, 
    nodeId: data.nodeId 
}));

// åç«¯æ—¥å¿—å‘é€ç¤ºä¾‹
engine.bus.on('workflow', lambda nodeId: 
    socketio.emit('workflow', {
        "nodeId": nodeId
    }, namespace='/workflow')
)
```

è¿™ç§è®¾è®¡è®©ç”¨æˆ·èƒ½å¤Ÿå®æ—¶ç›‘æ§å·¥ä½œæµçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ï¼Œæä¾›äº†ä¼˜ç§€çš„è°ƒè¯•ä½“éªŒã€‚ç³»ç»Ÿä¸ä»…èƒ½æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€ï¼Œè¿˜èƒ½å±•ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºç»“æœï¼Œå¤§å¤§æå‡äº†å·¥ä½œæµå¼€å‘å’Œè°ƒè¯•çš„æ•ˆç‡ã€‚

### AI å¢å¼ºå·¥ä½œæµç³»ç»Ÿ (AI-Enhanced Workflow System) ğŸš§

> ğŸ”¥ å³å°†æ¨å‡ºçš„æ–°åŠŸèƒ½

é›†æˆäº†å…ˆè¿›çš„ AI èƒ½åŠ›ï¼Œä¸ºå·¥ä½œæµæä¾›æ™ºèƒ½åŒ–æ”¯æŒï¼š

- ğŸ¤– **åŒæ¨¡å¼ AI åŠ©æ‰‹**:
  - Agent è‡ªåŠ¨æ“ä½œæ¨¡å¼ï¼šAI è‡ªåŠ¨æ‰§è¡Œå·¥ä½œæµä»»åŠ¡
  - Ask äº¤äº’å¼å¯¹è¯æ¨¡å¼ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€ä¸ AI åŠ©æ‰‹äº¤äº’

- ğŸ§  **æ™ºèƒ½èŠ‚ç‚¹ç±»å‹**:
  - LLM èŠ‚ç‚¹ï¼šé›†æˆå¤§è¯­è¨€æ¨¡å‹èƒ½åŠ›
  - VLLM èŠ‚ç‚¹ï¼šæ”¯æŒå¤šæ¨¡æ€å†…å®¹å¤„ç†
  - æ–‡æ¡£åˆ†æèŠ‚ç‚¹ï¼šè‡ªåŠ¨åŒ–æ–‡æ¡£ç†è§£ä¸å¤„ç†

- ğŸ“Š **æ–‡æ¡£æ™ºèƒ½å¤„ç†**:
  - è‡ªåŠ¨æ–‡æ¡£åˆ†æä¸ç»“æ„åŒ–
  - æ™ºèƒ½ä¿¡æ¯æå–
  - æ–‡æœ¬æ‘˜è¦ä¸é‡ç‚¹æå–

- ğŸ”„ **æ™ºèƒ½å·¥ä½œæµä¼˜åŒ–**:
  - è‡ªåŠ¨æµç¨‹ä¼˜åŒ–å»ºè®®
  - æ™ºèƒ½é”™è¯¯è¯Šæ–­
  - æ€§èƒ½ç“¶é¢ˆæ£€æµ‹


è¿™å¥— AI å¢å¼ºç³»ç»Ÿå°†ä¸ºç”¨æˆ·æä¾›æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆçš„å·¥ä½œæµå¤„ç†èƒ½åŠ›ï¼Œæ˜¾è‘—æå‡è‡ªåŠ¨åŒ–ç¨‹åº¦å’Œå¤„ç†æ•ˆç‡ã€‚

### æ™ºèƒ½èŠ‚ç‚¹æ¨èç³»ç»Ÿ (Node Recommendation System) ğŸš§

> ğŸ”¥ åˆ›æ–°ç‰¹æ€§è§„åˆ’

åŸºäºç”¨æˆ·è¡Œä¸ºå’Œå·¥ä½œæµæ¨¡å¼çš„æ™ºèƒ½æ¨èç³»ç»Ÿï¼š

- ğŸ¯ **ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ¨è**:
  - åŸºäºå½“å‰èŠ‚ç‚¹ç±»å‹æ¨èä¸‹ä¸€ä¸ªæœ€å¯èƒ½éœ€è¦çš„èŠ‚ç‚¹
  - æ™ºèƒ½è¯†åˆ«å¸¸ç”¨èŠ‚ç‚¹ç»„åˆæ¨¡å¼
  - è‡ªåŠ¨è¡¥å…¨èŠ‚ç‚¹é…ç½®å»ºè®®

- ğŸ“Š **ä½¿ç”¨æ¨¡å¼åˆ†æ**:
  - æ”¶é›†åŒ¿åçš„å·¥ä½œæµä½¿ç”¨æ•°æ®
  - åˆ†ææœ€ä½³å®è·µå’Œå¸¸ç”¨æ¨¡å¼
  - ä¸ºç”¨æˆ·æä¾›ä¼˜åŒ–å»ºè®®

### ååŒç¼–è¾‘ç³»ç»Ÿ (Collaborative Editing) ğŸš§

æ”¯æŒå¤šäººå®æ—¶åä½œç¼–è¾‘å·¥ä½œæµï¼š

- ğŸ‘¥ **å®æ—¶åä½œ**:
  - å¤šç”¨æˆ·åŒæ—¶ç¼–è¾‘æ”¯æŒ
  - å®æ—¶å˜æ›´åŒæ­¥
  - ç¼–è¾‘å†²çªè§£å†³

- ğŸ“ **ç‰ˆæœ¬æ§åˆ¶**:
  - å·¥ä½œæµç‰ˆæœ¬å†å²è®°å½•
  - å˜æ›´å¯¹æ¯”å’Œå›æ»š
  - åˆ†æ”¯ç®¡ç†ä¸åˆå¹¶

### å·¥ä½œæµæ¨¡æ¿å¸‚åœº (Workflow Template Marketplace) ğŸš§

ç¤¾åŒºé©±åŠ¨çš„å·¥ä½œæµæ¨¡æ¿ç”Ÿæ€ç³»ç»Ÿï¼š

- ğŸª **æ¨¡æ¿å¸‚åœº**:
  - é¢„ç½®è¡Œä¸šæ ‡å‡†å·¥ä½œæµæ¨¡æ¿
  - ç”¨æˆ·è‡ªå®šä¹‰æ¨¡æ¿åˆ†äº«
  - æ¨¡æ¿è¯„åˆ†å’Œè¯„è®ºç³»ç»Ÿ

- ğŸ”„ **ä¸€é”®å¤ç”¨**:
  - æ¨¡æ¿å¿«é€Ÿå¯¼å…¥
  - å‚æ•°è‡ªåŠ¨é€‚é…
  - æ¨¡æ¿ç»„åˆä¸å®šåˆ¶

### æ™ºèƒ½è°ƒè¯•ç³»ç»Ÿ (Smart Debugging System) ğŸš§

å¢å¼ºçš„è°ƒè¯•èƒ½åŠ›ï¼š

- ğŸ” **æ™ºèƒ½æ–­ç‚¹**:
  - æ¡ä»¶æ–­ç‚¹è®¾ç½®
  - å˜é‡ç›‘è§†
  - æ‰§è¡Œæ—¶é—´åˆ†æ

- ğŸ“Š **å¯è§†åŒ–è°ƒè¯•**:
  - æ•°æ®æµå¯è§†åŒ–
  - èŠ‚ç‚¹çŠ¶æ€å®æ—¶å±•ç¤º
  - æ€§èƒ½ç“¶é¢ˆæ ‡æ³¨

### è‡ªé€‚åº”å¸ƒå±€ç³»ç»Ÿ (Adaptive Layout System) ğŸš§

æ™ºèƒ½çš„ç•Œé¢å¸ƒå±€ä¼˜åŒ–ï¼š

- ğŸ“± **å“åº”å¼è®¾è®¡**:
  - è‡ªé€‚åº”å±å¹•å¤§å°
  - æ™ºèƒ½èŠ‚ç‚¹æ’åˆ—
  - è‡ªåŠ¨é¿å…èŠ‚ç‚¹é‡å 

- ğŸ¨ **æ™ºèƒ½ç¾åŒ–**:
  - è‡ªåŠ¨å¯¹é½å’Œåˆ†å¸ƒ
  - æ™ºèƒ½è¿çº¿è·¯å¾„è§„åˆ’
  - èŠ‚ç‚¹ç»„è‡ªåŠ¨å¸ƒå±€

è¿™äº›åˆ›æ–°ç‰¹æ€§å°†è¿›ä¸€æ­¥æå‡ Thryve2 çš„æ˜“ç”¨æ€§å’ŒåŠŸèƒ½æ€§ï¼Œä¸ºç”¨æˆ·æä¾›æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆçš„å·¥ä½œæµå¼€å‘ä½“éªŒã€‚æ¯ä¸ªå­ç³»ç»Ÿéƒ½ä¸“æ³¨äºè§£å†³ç‰¹å®šçš„ç”¨æˆ·ç—›ç‚¹ï¼Œå…±åŒæ„å»ºä¸€ä¸ªå®Œæ•´çš„æ™ºèƒ½å·¥ä½œæµç”Ÿæ€ç³»ç»Ÿã€‚

## æŠ€æœ¯æ¶æ„

### å‰ç«¯ (Fronted1)

- **æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **æ¡Œé¢æ”¯æŒ**: Electron
- **ä¸»è¦ä¾èµ–**:
  - @flowgram.ai ç³»åˆ—ç»„ä»¶ï¼ˆå¸ƒå±€ç¼–è¾‘å™¨ã€æ’ä»¶ç­‰ï¼‰
  - Socket.IO å®¢æˆ·ç«¯
  - React ç›¸å…³ç”Ÿæ€

### åç«¯ (Backend)

- **æ¡†æ¶**: Python
- **ä¸»è¦æ¨¡å—**:
  - å·¥ä½œæµæ‰§è¡Œå¼•æ“ (Engine.py)
  - äº‹ä»¶æ€»çº¿ç³»ç»Ÿ (EventBus.py)
  - èŠ‚ç‚¹å·¥å‚æ¨¡å¼å®ç° (Factory.py)
  - WebSocket æœåŠ¡å™¨

## é¡¹ç›®ç»“æ„

```
Thryve2/
â”œâ”€â”€ Backend/                # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app.py             # ä¸»åº”ç”¨æœåŠ¡å™¨
â”‚   â””â”€â”€ workflows/         # å·¥ä½œæµç›¸å…³æ¨¡å—
â”‚       â”œâ”€â”€ Engine.py      # å·¥ä½œæµæ‰§è¡Œå¼•æ“
â”‚       â”œâ”€â”€ Factory.py     # èŠ‚ç‚¹å·¥å‚
â”‚       â”œâ”€â”€ events/        # äº‹ä»¶å¤„ç†
â”‚       â””â”€â”€ nodes/         # èŠ‚ç‚¹ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ Fronted1/              # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/              # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/   # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ context/      # React Context
â”‚   â”‚   â”œâ”€â”€ nodes/        # èŠ‚ç‚¹å®ç°
â”‚   â”‚   â”œâ”€â”€ plugins/      # æ’ä»¶ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ services/     # æœåŠ¡å±‚
â”‚   â””â”€â”€ electron/         # Electron ç›¸å…³
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14
- Python >= 3.8
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/bjhh2005/Thryve2.git
cd Thryve2
```

2. å®‰è£…å‰ç«¯ä¾èµ–
```bash
cd Fronted1
npm install
```

3. å®‰è£…åç«¯ä¾èµ–
```bash
cd ../Backend
pip install -r requirements.txt
```

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

1. å¯åŠ¨åç«¯æœåŠ¡
```bash
cd Backend
python app.py
```

2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
```bash
cd Fronted1
npm run dev          # ç½‘é¡µç‰ˆ
# æˆ–
npm run electron:dev # æ¡Œé¢åº”ç”¨ç‰ˆ
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
cd Fronted1
npm run electron:build
```

ç”Ÿæˆçš„å®‰è£…åŒ…å°†ä½äº `Fronted1/release` ç›®å½•ã€‚